apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base
  
patches:
  - target:
      group: argoproj.io
      version: v1alpha1
      kind: Rollout
      name: todo-backend
    path: deployment-patch.json
  - target:
      group: argoproj.io
      version: v1alpha1
      kind: AnalysisTemplate
      name: cpu-usage
    path: analysis-patch.json
  - target:
      group: networking.k8s.io
      version: v1
      kind: Ingress
      name: dwk-todo-backend-ingress
    path: ingress-patch.json

images:
  - name: TODOBACKEND/IMAGE
    newName: desipeli/dwk-todo-backend
    newTag: "4.06"